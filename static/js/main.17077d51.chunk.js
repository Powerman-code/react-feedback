(this["webpackJsonpreact-feedback"]=this["webpackJsonpreact-feedback"]||[]).push([[0],{16:function(e,t,a){e.exports={FeedbackList:"FeedbackList_FeedbackList__wFceG",FeedbackItem:"FeedbackList_FeedbackItem__2l_9K"}},17:function(e,t,a){e.exports={Filter__input:"Filter_Filter__input__3-SAc",Filter__text:"Filter_Filter__text__2muWo"}},26:function(e,t,a){e.exports={container:"Container_container__3gaUh"}},32:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(12),s=a.n(n),o=(a(32),a(4)),u=a(8),b=a(26),i=a.n(b),d=a(1);function _(e){var t=e.children;return Object(d.jsx)("div",{className:i.a.container,children:t})}var l=a(27),m=a(9),p=a.n(m),F=function(e){var t=e.name,a=e.text;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:p.a.FeedbackItem__block,children:[Object(d.jsx)("div",{className:p.a.FeedbackItem__name,children:Object(d.jsx)("p",{className:p.a.FeedbackItem__name__text,children:t})}),Object(d.jsx)("div",{className:p.a.FeedbackItem__body,children:Object(d.jsx)("p",{className:p.a.FeedbackItem__body__text,children:a})})]})})},f=a(2),j=a.n(f),k=a(5),x=a(11),O=a.n(x),v="https://small-feedback-server.herokuapp.com/api/feedback",h="https://small-feedback-server.herokuapp.com/api/tempMessage",g="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e";function w(){return(w=Object(k.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O()(v);case 3:if(200!==(t=e.sent).status){e.next=7;break}return a=t.data,e.abrupt("return",a);case 7:return e.next=9,Promise.reject(new Error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"));case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var y=function(){var e=Object(k.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get(h);case 3:return t=e.sent,a=t.data,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(k.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.patch(h,t);case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),u.b.error(g),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I={fetchFeedbacks:function(){return w.apply(this,arguments)},fetchMessage:y,sendFeedback:function(){var e=Object(k.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post(v,t);case 3:if(a=e.sent,!((r=a.data).code=201)){e.next=8;break}return u.b.success("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"),e.abrupt("return",r.data);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),u.b.error(g),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),sendMessage:E},N=a(16),C=a.n(N),S=function(e){var t=e.feedback,a=e.filter,c=Object(r.useState)([]),n=Object(o.a)(c,2),s=n[0],u=n[1],b=Object(r.useState)(null),i=Object(o.a)(b,2),_=(i[0],i[1]);Object(r.useEffect)((function(){try{I.fetchFeedbacks().then((function(e){var t=e.data;t&&u(t.reverse())}))}catch(e){_(e.message)}}),[]);var m=Object(r.useCallback)((function(){t&&0!==Object.keys(t).length&&u([t].concat(Object(l.a)(s)))}),[t,s]);Object(r.useEffect)((function(){m()}),[t]);var p=function(){var e=a.toLowerCase();return a?s.filter((function(t){return t.name.toLowerCase().includes(e)})):s}();return Object(d.jsx)("ul",{className:C.a.FeedbackList,children:p.map((function(e){var t=e.id,a=e.name,r=e.text;return Object(d.jsx)("li",{className:C.a.FeedbackItem,children:Object(d.jsx)(F,{name:a,text:r})},t)}))})},L=a(14),z=a(7),M=a(58),A=(a(53),a(6)),B=a.n(A);var K=function(e){var t=e.handleFeedback,a=Object(r.useState)({name:"",text:""}),c=Object(o.a)(a,2),n=c[0],s=c[1],u=Object(M.a)(n.text,1e3),b=Object(o.a)(u,1)[0],i=Object(r.useState)(null),_=Object(o.a)(i,2),l=_[0],m=_[1],p=Object(r.useState)(null),F=Object(o.a)(p,2),f=F[0],x=F[1];Object(r.useEffect)((function(){localStorage.getItem("feedback")&&s(JSON.parse(localStorage.getItem("feedback"))),function(){var e=Object(k.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.fetchMessage();case 2:t=e.sent,a=t[0].message,s(Object(z.a)(Object(z.a)({},n),{},{text:a}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var O=function(e){var t=e.currentTarget,a=t.name,r=t.value;s(Object(z.a)(Object(z.a)({},n),{},Object(L.a)({},a,r))),m(null),x(null)};Object(r.useEffect)((function(){var e={message:b};I.sendMessage(e)}),[b]),Object(r.useEffect)((function(){localStorage.setItem("feedback",JSON.stringify(n))}),[n]);var v=Object(r.useCallback)(Object(k.a)(j.a.mark((function e(){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.sendFeedback(n);case 3:a=e.sent,r=a.feedback,t(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[n,t]),h=Object(r.useCallback)(Object(k.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(z.a)(Object(z.a)({},n),{},{text:""})),t={message:""},e.prev=2,e.next=5,I.sendMessage(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),[n]),g=Object(r.useCallback)((function(){var e=n.name,t=n.text;""!==e.trim()?""!==t.trim()?/^[a-z0-9_-]{3,16}$/.test(e)?/^.{1,300}$/.test(t)?/^((ftp|http|https):\/\/)?(www\.)?([A-Za-z\u0410-\u042f\u0430-\u044f0-9]{1}[A-Za-z\u0410-\u042f\u0430-\u044f0-9\\-]*\.?)*\.{1}[A-Za-z\u0410-\u042f\u0430-\u044f0-9-]{2,8}(\/([\w#!:.?+=&%@!\-\\/])*)?/.test(t)?x("\u0412 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0438"):(v(),h()):x("\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 1 \u0434\u043e 300 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):x('\u041f\u043e\u043b\u0435 "\u0418\u043c\u044f" \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0431\u0443\u043a\u0432\u044b \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430 \u043e\u0442 a \u0434\u043e z \u0438 \u0447\u0438\u0441\u043b\u0430 \u043e\u0442 0 \u0434\u043e 9. \u0414\u043b\u0438\u043d\u043d\u0430 \u0438\u043c\u0435\u043d\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u0442 3 \u0434\u043e 16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432'):x("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"):m("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f")}),[v,h,n]),w=Object(r.useCallback)((function(e){e.ctrlKey&&"Enter"===e.code&&g()}),[g]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",w),function(){window.removeEventListener("keydown",w)}}),[w]),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g()},onKeyDown:function(e){"Enter"!==e.code||e.preventDefault()},className:B.a.FeedbackForm,children:[Object(d.jsx)("label",{children:Object(d.jsx)("input",{autoComplete:"off",type:"text",name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f",value:n.name,onChange:O,className:B.a.FeedbackForm__input})}),(l||f)&&Object(d.jsxs)("div",{className:B.a.FeedbackForm__ErrorBlock,children:[Object(d.jsx)("span",{className:B.a.FeedbackForm__inputError,children:l}),Object(d.jsx)("span",{className:B.a.FeedbackForm__textareaError,children:f})]}),Object(d.jsx)("textarea",{type:"text",name:"text",value:n.text,onChange:O,className:B.a.FeedbackForm__textarea}),Object(d.jsxs)("p",{className:B.a.FeedbackForm__count,children:["\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432: ",300-n.text.length]}),Object(d.jsx)("button",{type:"submit",className:B.a.FeedbackForm__button,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})},J=a(17),Z=a.n(J),D=function(e){var t=e.value,a=e.onChange;return Object(d.jsxs)("label",{className:Z.a.Filter__text,children:["\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0438\u043c\u0435\u043d\u0438",Object(d.jsx)("input",{type:"text",value:t,onChange:a,className:Z.a.Filter__input})]})};a(54);var T=function(){var e=Object(r.useState)({}),t=Object(o.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(""),s=Object(o.a)(n,2),b=s[0],i=s[1];return Object(d.jsxs)(_,{children:[Object(d.jsx)(D,{value:b,onChange:function(e){i(e.currentTarget.value)}}),Object(d.jsx)(S,{feedback:a,filter:b}),Object(d.jsx)(K,{handleFeedback:function(e){c(e)}}),Object(d.jsx)(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})};a(55);s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(T,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={FeedbackForm:"FeedbackForm_FeedbackForm__31iqU",FeedbackForm__input:"FeedbackForm_FeedbackForm__input__1Ipt-",FeedbackForm__count:"FeedbackForm_FeedbackForm__count__3Vvog",FeedbackForm__textarea:"FeedbackForm_FeedbackForm__textarea__1OcVA",FeedbackForm__ErrorBlock:"FeedbackForm_FeedbackForm__ErrorBlock__44z29",FeedbackForm__inputError:"FeedbackForm_FeedbackForm__inputError__1KegH",FeedbackForm__textareaError:"FeedbackForm_FeedbackForm__textareaError__1_U2z",FeedbackForm__button:"FeedbackForm_FeedbackForm__button__2--mo"}},9:function(e,t,a){e.exports={FeedbackItem__body:"FeedbackItem_FeedbackItem__body__GsZLQ",FeedbackItem__name__text:"FeedbackItem_FeedbackItem__name__text__wF15E",FeedbackItem__body__text:"FeedbackItem_FeedbackItem__body__text__xhvOK"}}},[[56,1,2]]]);
//# sourceMappingURL=main.17077d51.chunk.js.map