(this["webpackJsonpreact-feedback"]=this["webpackJsonpreact-feedback"]||[]).push([[0],{17:function(e,t,a){e.exports={FeedbackList:"FeedbackList_FeedbackList__wFceG",FeedbackItem:"FeedbackList_FeedbackItem__2l_9K"}},18:function(e,t,a){e.exports={Filter__input:"Filter_Filter__input__3-SAc",Filter__text:"Filter_Filter__text__2muWo"}},27:function(e,t,a){e.exports={container:"Container_container__3gaUh"}},33:function(e,t,a){},5:function(e,t,a){e.exports={FeedbackForm:"FeedbackForm_FeedbackForm__31iqU",FeedbackForm__input:"FeedbackForm_FeedbackForm__input__1Ipt-",FeedbackForm__count:"FeedbackForm_FeedbackForm__count__3Vvog",FeedbackForm__textarea:"FeedbackForm_FeedbackForm__textarea__1OcVA",FeedbackForm__ErrorBlock:"FeedbackForm_FeedbackForm__ErrorBlock__44z29",FeedbackForm__inputError:"FeedbackForm_FeedbackForm__inputError__1KegH",FeedbackForm__textareaError:"FeedbackForm_FeedbackForm__textareaError__1_U2z",FeedbackForm__button:"FeedbackForm_FeedbackForm__button__2--mo"}},58:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(12),s=a.n(n),o=(a(33),a(4)),u=a(11),b=a(27),i=a.n(b),_=a(1);function d(e){var t=e.children;return Object(_.jsx)("div",{className:i.a.container,children:t})}var l=a(28),m=a(9),F=a.n(m),j=function(e){var t=e.name,a=e.text;return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:F.a.FeedbackItem__block,children:[Object(_.jsx)("div",{className:F.a.FeedbackItem__name,children:Object(_.jsx)("p",{className:F.a.FeedbackItem__name__text,children:t})}),Object(_.jsx)("div",{className:F.a.FeedbackItem__body,children:Object(_.jsx)("p",{className:F.a.FeedbackItem__body__text,children:a})})]})})},p=a(3),f=a.n(p),k=a(6),x=a(7),O=a.n(x);a(53).config();var h="http://localhost:8080/api/feedback";function v(){return(v=Object(k.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O()(h);case 3:if(200!==(t=e.sent).status){e.next=7;break}return a=t.data,e.abrupt("return",a);case 7:return e.next=9,Promise.reject(new Error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"));case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var g={fetchFeedbacks:function(){return v.apply(this,arguments)},fetchMessage:function(){var e=Object(k.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("http://localhost:8080/api/tempMessage");case 3:return t=e.sent,a=t.data,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),sendFeedback:function(){var e=Object(k.a)(f.a.mark((function e(t){var a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post(h,t);case 3:if(a=e.sent,!((c=a.data).code=201)){e.next=8;break}return u.b.success("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"),e.abrupt("return",c.data);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),u.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},w=a(17),y=a.n(w),E=function(e){var t=e.feedback,a=e.filter,r=Object(c.useState)([]),n=Object(o.a)(r,2),s=n[0],u=n[1],b=Object(c.useState)(null),i=Object(o.a)(b,2),d=(i[0],i[1]);Object(c.useEffect)((function(){try{g.fetchFeedbacks().then((function(e){var t=e.data;t&&u(t.reverse())}))}catch(e){d(e.message)}}),[]);Object(c.useEffect)((function(){t&&0!==Object.keys(t).length&&u([t].concat(Object(l.a)(s)))}),[t]);var m=function(){var e=a.toLowerCase();return a?s.filter((function(t){return t.name.toLowerCase().includes(e)})):s}();return Object(_.jsx)("ul",{className:y.a.FeedbackList,children:m.map((function(e){var t=e.id,a=e.name,c=e.text;return Object(_.jsx)("li",{className:y.a.FeedbackItem,children:Object(_.jsx)(j,{name:a,text:c})},t)}))})},I=a(14),N=a(8),C=a(62),S=(a(57),a(5)),L=a.n(S),z="http://localhost:8080/api/tempMessage";var A=function(e){var t=e.handleFeedback,a=Object(c.useState)({name:"",text:""}),r=Object(o.a)(a,2),n=r[0],s=r[1],u=Object(C.a)(n.text,1e3),b=Object(o.a)(u,1)[0],i=Object(c.useState)(null),d=Object(o.a)(i,2),l=d[0],m=d[1],F=Object(c.useState)(null),j=Object(o.a)(F,2),p=j[0],x=j[1];Object(c.useEffect)((function(){localStorage.getItem("feedback")&&s(JSON.parse(localStorage.getItem("feedback"))),function(){var e=Object(k.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.fetchMessage();case 2:t=e.sent,a=t[0].message,s(Object(N.a)(Object(N.a)({},n),{},{text:a}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var h=function(e){var t=e.currentTarget,a=t.name,c=t.value;s(Object(N.a)(Object(N.a)({},n),{},Object(I.a)({},a,c))),m(null),x(null)};Object(c.useEffect)((function(){var e={message:b};O.a.patch(z,e)}),[b]),Object(c.useEffect)((function(){localStorage.setItem("feedback",JSON.stringify(n))}),[n]);var v=Object(c.useCallback)(Object(k.a)(f.a.mark((function e(){var a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.sendFeedback(n);case 3:a=e.sent,c=a.feedback,t(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[n,t]),w=Object(c.useCallback)((function(){s(Object(N.a)(Object(N.a)({},n),{},{text:""}));O.a.patch(z,{message:""})}),[n]),y=Object(c.useCallback)((function(){var e=n.name,t=n.text;""!==e.trim()?""!==t.trim()?/^[a-z0-9_-]{3,16}$/.test(e)?/^.{1,300}$/.test(t)?/^((ftp|http|https):\/\/)?(www\.)?([A-Za-z\u0410-\u042f\u0430-\u044f0-9]{1}[A-Za-z\u0410-\u042f\u0430-\u044f0-9\-]*\.?)*\.{1}[A-Za-z\u0410-\u042f\u0430-\u044f0-9-]{2,8}(\/([\w#!:.?+=&%@!\-\/])*)?/.test(t)?x("\u0412 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0438"):(v(),w()):x("\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 1 \u0434\u043e 300 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):x('\u041f\u043e\u043b\u0435 "\u0418\u043c\u044f" \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0431\u0443\u043a\u0432\u044b \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430 \u043e\u0442 a \u0434\u043e z \u0438 \u0447\u0438\u0441\u043b\u0430 \u043e\u0442 0 \u0434\u043e 9. \u0414\u043b\u0438\u043d\u043d\u0430 \u0438\u043c\u0435\u043d\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043e\u0442 3 \u0434\u043e 16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432'):x("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"):m("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f")}),[v,w,n]),E=Object(c.useCallback)((function(e){e.ctrlKey&&"Enter"===e.code&&y()}),[y]);return Object(c.useEffect)((function(){return window.addEventListener("keydown",E),function(){window.removeEventListener("keydown",E)}}),[E]),Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),y()},onKeyDown:function(e){"Enter"!==e.code||e.preventDefault()},className:L.a.FeedbackForm,children:[Object(_.jsx)("label",{children:Object(_.jsx)("input",{autoComplete:"off",type:"text",name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f",value:n.name,onChange:h,className:L.a.FeedbackForm__input})}),(l||p)&&Object(_.jsxs)("div",{className:L.a.FeedbackForm__ErrorBlock,children:[Object(_.jsx)("span",{className:L.a.FeedbackForm__inputError,children:l}),Object(_.jsx)("span",{className:L.a.FeedbackForm__textareaError,children:p})]}),Object(_.jsx)("textarea",{type:"text",name:"text",value:n.text,onChange:h,className:L.a.FeedbackForm__textarea}),Object(_.jsxs)("p",{className:L.a.FeedbackForm__count,children:["\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432: ",300-n.text.length]}),Object(_.jsx)("button",{type:"submit",className:L.a.FeedbackForm__button,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})},B=a(18),K=a.n(B),M=function(e){var t=e.value,a=e.onChange;return Object(_.jsxs)("label",{className:K.a.Filter__text,children:["\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0438\u043c\u0435\u043d\u0438",Object(_.jsx)("input",{type:"text",value:t,onChange:a,className:K.a.Filter__input})]})};a(58);var J=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),a=t[0],r=t[1],n=Object(c.useState)(""),s=Object(o.a)(n,2),b=s[0],i=s[1];return Object(_.jsxs)(d,{children:[Object(_.jsx)(M,{value:b,onChange:function(e){i(e.currentTarget.value)}}),Object(_.jsx)(E,{feedback:a,filter:b}),Object(_.jsx)(A,{handleFeedback:function(e){r(e)}}),Object(_.jsx)(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})};a(59);s.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(J,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={FeedbackItem__body:"FeedbackItem_FeedbackItem__body__GsZLQ",FeedbackItem__name__text:"FeedbackItem_FeedbackItem__name__text__wF15E",FeedbackItem__body__text:"FeedbackItem_FeedbackItem__body__text__xhvOK"}}},[[60,1,2]]]);
//# sourceMappingURL=main.acfa73db.chunk.js.map